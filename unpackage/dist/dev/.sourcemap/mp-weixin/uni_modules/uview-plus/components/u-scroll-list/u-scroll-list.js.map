{"version":3,"file":"u-scroll-list.js","sources":["uni_modules/uview-plus/components/u-scroll-list/u-scroll-list.vue","../../develop-tool/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovV3gtZGV2ZWxvcC9wcm9qZWN0L3RvdXJpc20tYXBwL3VuaV9tb2R1bGVzL3V2aWV3LXBsdXMvY29tcG9uZW50cy91LXNjcm9sbC1saXN0L3Utc2Nyb2xsLWxpc3QudnVl"],"sourcesContent":["<template>\r\n\t<view\r\n\t\tclass=\"u-scroll-list\"\r\n\t\tref=\"u-scroll-list\"\r\n\t>\r\n\t\t<!-- #ifdef APP-NVUE -->\r\n\t\t<!-- nvue使用bindingX实现，以得到更好的性能 -->\r\n\t\t<scroller\r\n\t\t\tclass=\"u-scroll-list__scroll-view\"\r\n\t\t\tref=\"u-scroll-list__scroll-view\"\r\n\t\t\tscroll-direction=\"horizontal\"\r\n\t\t\t:show-scrollbar=\"false\"\r\n\t\t\t:offset-accuracy=\"1\"\r\n\t\t\t@scroll=\"nvueScrollHandler\"\r\n\t\t>\r\n\t\t\t<view class=\"u-scroll-list__scroll-view__content\">\r\n\t\t\t\t<slot />\r\n\t\t\t</view>\r\n\t\t</scroller>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifndef APP-NVUE -->\r\n\t\t<!-- #ifdef MP-WEIXIN || APP-VUE || H5 || MP-QQ -->\r\n\t\t<!-- 以上平台，支持wxs -->\r\n\t\t<scroll-view\r\n\t\t\tclass=\"u-scroll-list__scroll-view scroll-view-native\"\r\n\t\t\tscroll-x\r\n\t\t\tenable-flex\r\n\t\t\t@scroll=\"wxs.scroll\"\r\n\t\t\t@scrolltoupper=\"wxs.scrolltoupper\"\r\n\t\t\t@scrolltolower=\"wxs.scrolltolower\"\r\n\t\t\t:data-scrollWidth=\"scrollWidth\"\r\n\t\t\t:data-barWidth=\"getPx(indicatorBarWidth)\"\r\n\t\t\t:data-indicatorWidth=\"getPx(indicatorWidth)\"\r\n\t\t\t:show-scrollbar=\"false\"\r\n\t\t\t:upper-threshold=\"0\"\r\n\t\t\t:lower-threshold=\"0\"\r\n\t\t>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifndef APP-NVUE || MP-WEIXIN || H5 || APP-VUE || MP-QQ -->\r\n\t\t\t<!-- 非以上平台，只能使用普通js实现 -->\r\n\t\t\t<scroll-view\r\n\t\t\t\tclass=\"u-scroll-list__scroll-view scroll-view-js\"\r\n\t\t\t\tscroll-x\r\n\t\t\t\t@scroll=\"scrollHandler\"\r\n\t\t\t\t@scrolltoupper=\"scrolltoupperHandler\"\r\n\t\t\t\t@scrolltolower=\"scrolltolowerHandler\"\r\n\t\t\t\t:show-scrollbar=\"false\"\r\n\t\t\t\t:upper-threshold=\"0\"\r\n\t\t\t\t:lower-threshold=\"0\"\r\n\t\t\t>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<view class=\"u-scroll-list__scroll-view__content\">\r\n\t\t\t\t\t<slot />\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view\r\n\t\t\t\tclass=\"u-scroll-list__indicator\"\r\n\t\t\t\tv-if=\"indicator\"\r\n\t\t\t\t:style=\"[addStyle(indicatorStyle)]\"\r\n\t\t\t>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"u-scroll-list__indicator__line\"\r\n\t\t\t\t\t:style=\"[lineStyle]\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"u-scroll-list__indicator__line__bar\"\r\n\t\t\t\t\t\t:style=\"[barStyle]\"\r\n\t\t\t\t\t\tref=\"u-scroll-list__indicator__line__bar\"\r\n\t\t\t\t\t></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script\r\n\tsrc=\"./scrollWxs.wxs\"\r\n\tmodule=\"wxs\"\r\n\tlang=\"wxs\"\r\n></script>\r\n\r\n<script>\r\n/**\r\n * scrollList 横向滚动列表\r\n * @description 该组件一般用于同时展示多个商品、分类的场景，也可以完成左右滑动的列表。\r\n * @tutorial https://ijry.github.io/uview-plus/components/scrollList.html\r\n * @property {String | Number}\tindicatorWidth\t\t\t指示器的整体宽度 (默认 50 )\r\n * @property {String | Number}\tindicatorBarWidth\t\t滑块的宽度 (默认 20 )\r\n * @property {Boolean}\t\t\tindicator\t\t\t\t是否显示面板指示器 (默认 true )\r\n * @property {String}\t\t\tindicatorColor\t\t\t指示器非激活颜色 (默认 '#f2f2f2' )\r\n * @property {String}\t\t\tindicatorActiveColor\t指示器的激活颜色 (默认 '#3c9cff' )\r\n * @property {String | Object}\tindicatorStyle\t\t\t指示器样式，可通过bottom，left，right进行定位\r\n * @event {Function} left\t滑动到左边时触发\r\n * @event {Function} right\t滑动到右边时触发\r\n * @example\r\n */\r\n// #ifdef APP-NVUE\r\nconst dom = uni.requireNativePlugin('dom')\r\nimport nvueMixin from \"./nvue.js\"\r\n// #endif\r\nimport { props } from './props';\r\nimport { mpMixin } from '../../libs/mixin/mpMixin';\r\nimport { mixin } from '../../libs/mixin/mixin';\r\nimport { addStyle, addUnit, getPx, sleep } from '../../libs/function/index';\r\nexport default {\r\n\tname: 'u-scroll-list',\r\n\t// #ifndef APP-NVUE\r\n\tmixins: [mpMixin, mixin, props],\r\n\t// #endif\r\n\t// #ifdef APP-NVUE\r\n\tmixins: [mpMixin, mixin, nvueMixin, props],\r\n\t// #endif\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tscrollInfo: {\r\n\t\t\t\tscrollLeft: 0,\r\n\t\t\t\tscrollWidth: 0\r\n\t\t\t},\r\n\t\t\tscrollWidth: 0\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 指示器为线型的样式\r\n\t\tbarStyle() {\r\n\t\t\tconst style = {}\r\n\t\t\t// #ifndef APP-NVUE || MP-WEIXIN || H5 || APP-VUE || MP-QQ\r\n\t\t\t// 此为普通js方案，只有在非nvue和不支持wxs方案的端才使用、\r\n\t\t\t// 此处的计算理由为：scroll-view的滚动距离与目标滚动距离(scroll-view的实际宽度减去包裹元素的宽度)之比，等于滑块当前移动距离与总需\r\n\t\t\t// 滑动距离(指示器的总宽度减去滑块宽度)的比值\r\n\t\t\tconst scrollLeft = this.scrollInfo.scrollLeft,\r\n\t\t\t\tscrollWidth = this.scrollInfo.scrollWidth,\r\n\t\t\t\tbarAllMoveWidth = this.indicatorWidth - this.indicatorBarWidth\r\n\t\t\tconst x = scrollLeft / (scrollWidth - this.scrollWidth) * barAllMoveWidth\r\n\t\t\tstyle.transform = `translateX(${ x }px)`\r\n\t\t\t// #endif\r\n\t\t\t// 设置滑块的宽度和背景色，是每个平台都需要的\r\n\t\t\tstyle.width = addUnit(this.indicatorBarWidth)\r\n\t\t\tstyle.backgroundColor = this.indicatorActiveColor\r\n\t\t\treturn style\r\n\t\t},\r\n\t\tlineStyle() {\r\n\t\t\tconst style = {}\r\n\t\t\t// 指示器整体的样式，需要设置其宽度和背景色\r\n\t\t\tstyle.width = addUnit(this.indicatorWidth)\r\n\t\t\tstyle.backgroundColor = this.indicatorColor\r\n\t\t\treturn style\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.init()\r\n\t},\r\n\temits: [\"left\", \"right\"],\r\n\tmethods: {\r\n\t\taddStyle,\r\n\t\tgetPx,\r\n\t\tinit() {\r\n\t\t\tthis.getComponentWidth()\r\n\t\t},\r\n\t\t// #ifndef APP-NVUE || MP-WEIXIN || H5 || APP-VUE || MP-QQ\r\n\t\t// scroll-view触发滚动事件\r\n\t\tscrollHandler(e) {\r\n\t\t\tthis.scrollInfo = e.detail\r\n\t\t},\r\n\t\tscrolltoupperHandler() {\r\n\t\t\tthis.scrollEvent('left')\r\n\t\t\tthis.scrollInfo.scrollLeft = 0\r\n\t\t},\r\n\t\tscrolltolowerHandler() {\r\n\t\t\tthis.scrollEvent('right')\r\n\t\t\t// 在普通js方案中，滚动到右边时，通过设置this.scrollInfo，模拟出滚动到右边的情况\r\n\t\t\t// 因为上方是用过computed计算的，设置后，会自动调整滑块的位置\r\n\t\t\tthis.scrollInfo.scrollLeft = getPx(this.indicatorWidth) - getPx(this.indicatorBarWidth)\r\n\t\t},\r\n\t\t// #endif\r\n\t\t//\r\n\t\tscrollEvent(status) {\r\n\t\t\tthis.$emit(status)\r\n\t\t},\r\n\t\t// 获取组件的宽度\r\n\t\tasync getComponentWidth() {\r\n\t\t\t// 延时一定时间，以获取dom尺寸\r\n\t\t\tawait sleep(30)\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\tthis.$uGetRect('.u-scroll-list').then(size => {\r\n\t\t\t\tthis.scrollWidth = size.width\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tconst ref = this.$refs['u-scroll-list']\r\n\t\t\tref && dom.getComponentRect(ref, (res) => {\r\n\t\t\t\tthis.scrollWidth = res.size.width\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../libs/css/components.scss\";\r\n\r\n.u-scroll-list {\r\n\tpadding-bottom: 10px;\r\n\r\n\t&__scroll-view {\r\n\t\t@include flex;\r\n\t\t// 缺少会在enable-flex模式下高度异常\r\n\t\talign-items: flex-start;\r\n\r\n\t\t&__content {\r\n\t\t\t@include flex;\r\n\t\t}\r\n\t}\r\n\r\n\t&__indicator {\r\n\t\t@include flex;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 15px;\r\n\r\n\t\t&__line {\r\n\t\t\twidth: 60px;\r\n\t\t\theight: 4px;\r\n\t\t\tborder-radius: 100px;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t&__bar {\r\n\t\t\t\twidth: 20px;\r\n\t\t\t\theight: 4px;\r\n\t\t\t\tborder-radius: 100px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import Component from 'D:/Wx-develop/project/tourism-app/uni_modules/uview-plus/components/u-scroll-list/u-scroll-list.vue'\nwx.createComponent(Component)"],"names":["mpMixin","mixin","props","addUnit","addStyle","getPx","sleep"],"mappings":";;;;;;;;;;;;AAwGA,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EAEN,QAAQ,CAACA,yCAAAA,SAASC,uCAAK,OAAEC,wDAAK;AAAA,EAK9B,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,QACX,YAAY;AAAA,QACZ,aAAa;AAAA,MACb;AAAA,MACD,aAAa;AAAA,IACd;AAAA,EACA;AAAA,EACD,UAAU;AAAA;AAAA,IAET,WAAW;AACV,YAAM,QAAQ,CAAC;AAYf,YAAM,QAAQC,kDAAQ,KAAK,iBAAiB;AAC5C,YAAM,kBAAkB,KAAK;AAC7B,aAAO;AAAA,IACP;AAAA,IACD,YAAY;AACX,YAAM,QAAQ,CAAC;AAEf,YAAM,QAAQA,kDAAQ,KAAK,cAAc;AACzC,YAAM,kBAAkB,KAAK;AAC7B,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,KAAK;AAAA,EACV;AAAA,EACD,OAAO,CAAC,QAAQ,OAAO;AAAA,EACvB,SAAS;AAAA,IACR,UAAAC,0CAAQ;AAAA,WACRC,0CAAK;AAAA,IACL,OAAO;AACN,WAAK,kBAAkB;AAAA,IACvB;AAAA;AAAA,IAkBD,YAAY,QAAQ;AACnB,WAAK,MAAM,MAAM;AAAA,IACjB;AAAA;AAAA,IAED,MAAM,oBAAoB;AAEzB,YAAMC,0CAAAA,MAAM,EAAE;AAEd,WAAK,UAAU,gBAAgB,EAAE,KAAK,UAAQ;AAC7C,aAAK,cAAc,KAAK;AAAA,OACxB;AAAA,IASD;AAAA,EACF;AACD;;;;;;;;;;;;;;;;ACnMA,GAAG,gBAAgB,SAAS;"}